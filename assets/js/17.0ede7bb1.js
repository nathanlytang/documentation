(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{396:function(a,t,e){"use strict";e.r(t);var s=e(54),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"additional-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#additional-configuration"}},[a._v("#")]),a._v(" Additional Configuration")]),a._v(" "),e("p",[a._v("The following configurations are made with Linux hosting in mind.")]),a._v(" "),e("h2",{attrs:{id:"daemon"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#daemon"}},[a._v("#")]),a._v(" Daemon")]),a._v(" "),e("p",[a._v("You can use systemd on Linux to run your bot as a system process.  This allows your bot to run in the background and autostart on boot.  To enable this, create a file called "),e("code",[a._v("steve.service")]),a._v(" in "),e("code",[a._v("/etc/systemd/system")]),a._v(" with the following contents:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[Unit]\nDescription=Steve Discord Bot\nAfter=syslog.target network.target mysql.service\n\n[Service]\nUser=YOUR_USERNAME\nGroup=YOUR_GROUP\n\nType=simple\n\nWorkingDirectory=/opt/Steve\nExecStart=npm run production\nTimeoutStopSec=20\nKillMode=mixed\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n")])])]),e("p",[a._v("Replace YOUR_USERNAME and YOUR_GROUP with your Linux username and group.")]),a._v(" "),e("h2",{attrs:{id:"backups"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#backups"}},[a._v("#")]),a._v(" Backups")]),a._v(" "),e("p",[a._v("It is recommended to back up your database every so often, as to not lose any data in the event of a potential hardware or data failure.  To make backups easy, all you need to do is run the "),e("a",{attrs:{href:"https://github.com/nathanlytang/Steve/blob/master/scripts/backup.sh",target:"_blank",rel:"noopener noreferrer"}},[a._v("backup script"),e("OutboundLink")],1),a._v(" to create a timedate backup file of the database.")]),a._v(" "),e("h4",{attrs:{id:"setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[a._v("#")]),a._v(" Setup")]),a._v(" "),e("p",[a._v("The backup script should already be installed if you downloaded the zip file or cloned the repository.  In the script, you will find a section that looks like this:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Variables")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DATABASE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("stevebot "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Name of your database")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("BACKUP")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/Steve/backups "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Path to your backup location")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DATE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +"),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"%Y-%m-%d-T%H-%M-%S"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Current date and time")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FILE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("steve-bot-data-"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DATE")]),a._v(".sql "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Backup file name")]),a._v("\n")])])]),e("p",[a._v("Change the "),e("code",[a._v("DATABASE")]),a._v(" and "),e("code",[a._v("BACKUP")]),a._v(" variables to match your configuration.  To run the backup script:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("/opt/Steve/scripts/backup.sh -u stevebotuser -h "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 -p somePassword\n")])])]),e("p",[e("strong",[a._v("NOTE")]),a._v(": Change the user and password to match the user and password you set up in the database.  Change the path to match the path to your backup script as well.")]),a._v(" "),e("h4",{attrs:{id:"automate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#automate"}},[a._v("#")]),a._v(" Automate")]),a._v(" "),e("p",[a._v("To automate this process, we will use cron.")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Open crontab editor")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("crontab")]),a._v(" -e\n")])])]),e("p",[a._v("In the crontab file, add this line:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Create a backup of the database once a day")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Change the user and password to match the user and password you set up in the database.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Change the path to match the path to your backup script as well.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" * * * /opt/Steve/scripts/backup.sh -u stevebotuser -h "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 -p somePassword\n")])])]),e("p",[a._v("Save and close the file.  Now, cron will automatically backup your database once a day at 00:00 (12AM).")])])}),[],!1,null,null,null);t.default=n.exports}}]);